"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[583],{583:(U,m,s)=>{s.r(m),s.d(m,{UsersModule:()=>C});var d=s(9808),c=s(9560),g=s(5226),p=s.n(g),r=s(2382),t=s(1223),f=s(9730),h=s(4073);function v(o,l){if(1&o&&(t.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"p",15),t._uU(4),t.qZA(),t.TgZ(5,"div",16),t._UZ(6,"div",17),t.TgZ(7,"small",18),t._uU(8),t.qZA()()()()()),2&o){const e=l.$implicit,i=t.oxw();t.xp6(4),t.Oqu(e.email),t.xp6(4),t.Oqu(i.getRol(e.rol))}}function _(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"div",19)(1,"h4",20),t._uU(2,"Crear usuario"),t.qZA(),t.TgZ(3,"button",21),t.NdJ("click",function(){return t.CHM(e).$implicit.dismiss("Cross click")}),t.qZA()(),t.TgZ(4,"form",22),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().submitForm()}),t.TgZ(5,"div",23)(6,"div",24),t._UZ(7,"input",25),t.TgZ(8,"label",26),t._uU(9,"Email"),t.qZA()(),t.TgZ(10,"div",24),t._UZ(11,"input",27),t.TgZ(12,"div",28),t._uU(13," Please provide a valid city. "),t.qZA(),t.TgZ(14,"label",29),t._uU(15,"Contrase\xf1a"),t.qZA()(),t.TgZ(16,"div",30)(17,"select",31)(18,"option",32),t._uU(19,"--Selecccione un rol--"),t.qZA(),t.TgZ(20,"option",33),t._uU(21,"Admin"),t.qZA(),t.TgZ(22,"option",34),t._uU(23,"Usuario"),t.qZA()(),t.TgZ(24,"label",35),t._uU(25,"Contrase\xf1a"),t.qZA()()(),t.TgZ(26,"div",36)(27,"button",37),t.NdJ("click",function(){return t.CHM(e).$implicit.close("Save click")}),t._uU(28,"Save"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(4),t.Q6J("formGroup",e.fRegister)}}const b=[{path:"list",component:(()=>{class o{constructor(e,i,n,a){this._fb=e,this._service=i,this._router=n,this.modalService=a,this.rols={1:"Administrador",2:"Usuario"},this.filter="test",this.users=[],this.usersFilter=[],this.loadUser()}ngOnInit(){this.initializeForm()}loadUser(){this.filter="",this._service.doPetition("getAll",null).subscribe(e=>{200==e.code?(this.users=e.data,this.usersFilter=this.users):console.log(e)},e=>{console.log(e),this.showAlert({title:"Error al obtener los usuarios",html:e.error.msg?"Usted no puede ver informaci\xf3n clasificada":"Ocurrio un error al intentar loegarlo.<br>Por favor intentelo m\xe1s tarde",icon:"error"}).then(()=>{e.error.msg&&this._router.navigate(["/access/logout"])})})}showAlert(e){return p().fire(e)}initializeForm(){this.fRegister=this._fb.group({email:[null,r.kI.required],password:[null,r.kI.required],rol:["",r.kI.required]})}register(){this._service.doPetition("register",this.fRegister.value).subscribe(e=>{200==e.code&&this.showAlert({title:"Usuario registrado",html:"Ya puede iniciar sesi\xf3n con el",icon:"success"}).then(()=>{this.loadUser()})},e=>{console.log(e),this.showAlert({title:"Error al registrar",html:"Ocurrio un error al intentar registrar el usuario, check log",icon:"error"})})}submitForm(){if(this.fRegister.valid)this.register();else{let e=null==this.fRegister.controls.email.value?"Ingrese un email valido":"";e+=null==this.fRegister.controls.password.value?(""!=e?"<br>":"")+"Ingrese una contrase\xf1a":"",e+=""==this.fRegister.controls.rol.value?(""!=e?"<br>":"")+"Seleccione un rol":"",this.showAlert({title:"Imposible registrar!!",html:e,icon:"warning",dangerMode:!0})}}open(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"})}getRol(e){return this.rols[e]}searchData(e){this.usersFilter=""==e.value?this.users:this.users.filter(i=>i.email.indexOf(e.value)>-1)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(r.qu),t.Y36(f.B),t.Y36(c.F0),t.Y36(h.FF))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-list"]],decls:19,vars:2,consts:[["role","main"],[1,"jumbotron","text-center","mb-0"],[1,"container"],[1,"jumbotron-heading"],[1,"lead","text-muted"],[1,"btn","btn-secondary","my-2",3,"click"],[1,"album","py-5","bg-light"],[1,"row"],[1,"col-md-3","mb-2"],["placeholder","Buscar...",1,"form-control",3,"ngModel","ngModelChange","input"],["class","col-md-3",4,"ngFor","ngForOf"],["content",""],[1,"col-md-3"],[1,"card","mb-4","shadow-sm"],[1,"card-body"],[1,"card-text"],[1,"d-flex","justify-content-between","align-items-center"],[1,"btn-group"],[1,"text-muted"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"was-validated",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"form-outline","mb-4"],["type","email","id","in-email","formControlName","email","placeholder","mail@mail.com",1,"form-control","form-control-lg"],["for","in-email",1,"form-label"],["type","password","id","in-password","formControlName","password","placeholder","*****",1,"form-control","form-control-lg"],[1,"invalid-feedback"],["for","in-password",1,"form-label"],[1,"form-outline","mb-3"],["id","in-rol","formControlName","rol",1,"form-control","form-control-lg"],["value",""],["value","1"],["value","2"],["for","in-rol",1,"form-label"],[1,"modal-footer"],["type","submit",1,"btn","btn-outline-dark",3,"click"]],template:function(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"main",0)(1,"section",1)(2,"div",2)(3,"h1",3),t._uU(4,"Listado de usuarios"),t.qZA(),t.TgZ(5,"p",4),t._uU(6,"A continuaci\xf3n de muestran los usuarios registrados"),t.qZA(),t.TgZ(7,"p")(8,"a",5),t.NdJ("click",function(){t.CHM(n);const u=t.MAs(18);return i.open(u)}),t._uU(9,"Agregar usuario"),t.qZA()()()(),t.TgZ(10,"div",6)(11,"div",2)(12,"div",7)(13,"div",8)(14,"input",9),t.NdJ("ngModelChange",function(u){return i.filter=u})("input",function(u){return i.searchData(u.target)}),t.qZA()()(),t.TgZ(15,"div",7),t.YNc(16,v,9,2,"div",10),t.qZA()()()(),t.YNc(17,_,29,1,"ng-template",null,11,t.W1O)}2&e&&(t.xp6(14),t.Q6J("ngModel",i.filter),t.xp6(2),t.Q6J("ngForOf",i.usersFilter))},directives:[r.Fj,r.JJ,r.On,d.sg,r._Y,r.JL,r.sg,r.u,r.EJ,r.YN,r.Kr],styles:[""]}),o})()},{path:"**",redirectTo:"list"}];let Z=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[c.Bz.forChild(b)],c.Bz]}),o})(),C=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[d.ez,Z,r.u5,r.UX]]}),o})()}}]);