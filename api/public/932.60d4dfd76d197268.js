"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[932],{9932:(T,u,l)=>{l.r(u),l.d(u,{AccessModule:()=>w});var g=l(9808),s=l(9560),r=l(2382),d=l(5226),m=l.n(d),e=l(1223),c=l(9730);const f=function(){return["/access/register"]};let p=(()=>{class o{constructor(t,n,a){this._fb=t,this._petitions=n,this._router=a,this.initializeForm()}ngOnInit(){}submitForm(){if(this.fLogin.valid)this.login();else{console.log(this.fLogin.controls.email.value),console.log(this.fLogin.controls.password.value);let t=null==this.fLogin.controls.email.value?"Ingrese su email":"";t+=null==this.fLogin.controls.password.value?(""!=t?"<br>":"")+"Ingrese su contrase\xf1a":"",this.showAlert({title:"Faltan datos!!",html:t,icon:"warning",dangerMode:!0})}}initializeForm(){this.fLogin=this._fb.group({email:[null,r.kI.required],password:[null,r.kI.required]})}login(){this._petitions.doPetition("login",this.fLogin.value).subscribe(t=>{200==t.code&&this.showAlert({title:"Usuario encontrado",html:"Bienvenido",icon:"success"}).then(()=>{localStorage.setItem("userSession",t.data),this._router.navigate(["/users/list"])})},t=>{this.showAlert(t.error&&t.error.msg?{title:"Usuario no encontrado",html:"Por favor, verifique sus informaci\xf3n",icon:"error"}:{title:"Error al logear",html:"Ocurrio un error al intentar loegarlo.<br>Por favor intentelo m\xe1s tarde",icon:"error"})})}showAlert(t){return m().fire(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(r.qu),e.Y36(c.B),e.Y36(s.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-login"]],decls:21,vars:3,consts:[[1,"divider","d-flex","align-items-center","my-4"],[1,"text-center","fw-bold","mx-3","mb-0"],[1,"was-validated",3,"formGroup","ngSubmit"],[1,"form-outline","mb-4"],["type","email","id","in-email","formControlName","email","placeholder","mail@mail.com",1,"form-control","form-control-lg"],["for","in-email",1,"form-label"],[1,"form-outline","mb-3"],["type","password","id","in-password","formControlName","password","placeholder","*****",1,"form-control","form-control-lg"],[1,"invalid-feedback"],["for","in-password",1,"form-label"],[1,"text-center","text-lg-start","mt-4","pt-2"],["type","submit",1,"btn","btn-primary","btn-lg",2,"padding-left","2.5rem","padding-right","2.5rem"],[1,"small","fw-bold","mt-2","pt-1","mb-0"],[1,"link-danger",3,"routerLink"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"p",1),e._uU(2,"Welcome"),e.qZA()(),e.TgZ(3,"form",2),e.NdJ("ngSubmit",function(){return n.submitForm()}),e.TgZ(4,"div",3),e._UZ(5,"input",4),e.TgZ(6,"label",5),e._uU(7,"Email"),e.qZA()(),e.TgZ(8,"div",6),e._UZ(9,"input",7),e.TgZ(10,"div",8),e._uU(11," Please provide a valid city. "),e.qZA(),e.TgZ(12,"label",9),e._uU(13,"Contrase\xf1a"),e.qZA()(),e.TgZ(14,"div",10)(15,"button",11),e._uU(16,"Acceder"),e.qZA(),e.TgZ(17,"p",12),e._uU(18,"No tiene cuenta? "),e.TgZ(19,"a",13),e._uU(20,"Registro"),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("formGroup",n.fLogin),e.xp6(16),e.Q6J("routerLink",e.DdM(2,f)))},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,s.yS],styles:[""]}),o})();const h=function(){return["/access"]};let v=(()=>{class o{constructor(){localStorage.clear()}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-logout"]],decls:7,vars:2,consts:[[1,"divider","d-flex","align-items-center","my-4"],[1,"text-center","fw-bold","mx-3","mb-0"],[1,"row"],[1,"col-md-4","offset-md-4","col-sm-12","text-center"],[1,"btn","btn-primary","form-control",3,"routerLink"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"p",1),e._uU(2,"Su sesi\xf3n de ha cerrado"),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3)(5,"button",4),e._uU(6,"Ir al login"),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("routerLink",e.DdM(1,h)))},directives:[s.rH],styles:[""]}),o})();const b=function(){return["/access"]},Z=[{path:"login",component:p},{path:"register",component:(()=>{class o{constructor(t,n,a){this._fb=t,this._petitions=n,this._router=a,this.initializeForm()}ngOnInit(){}submitForm(){if(this.fRegister.valid)this.register();else{let t=null==this.fRegister.controls.email.value?"Ingrese un email valido":"";t+=null==this.fRegister.controls.password.value?(""!=t?"<br>":"")+"Ingrese una contrase\xf1a":"",t+=""==this.fRegister.controls.rol.value?(""!=t?"<br>":"")+"Seleccione un rol":"",this.showAlert({title:"Faltan datos!!",html:t,icon:"warning",dangerMode:!0})}}initializeForm(){this.fRegister=this._fb.group({email:[null,r.kI.required],password:[null,r.kI.required],rol:["",r.kI.required]})}register(){this._petitions.doPetition("register",this.fRegister.value).subscribe(t=>{200==t.code&&this.showAlert({title:"Usuario registrado",html:"Ya puede iniciar sesi\xf3n con el",icon:"success"}).then(()=>{this._router.navigate(["/access"])})},t=>{console.log(t),this.showAlert({title:"Error al registrar",html:"Ocurrio un error al intentar registrar el usuario, check log",icon:"error"})})}showAlert(t){return m().fire(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(r.qu),e.Y36(c.B),e.Y36(s.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-register"]],decls:31,vars:3,consts:[[1,"divider","d-flex","align-items-center","my-4"],[1,"text-center","fw-bold","mx-3","mb-0"],[1,"was-validated","mb-4",3,"formGroup","ngSubmit"],[1,"form-outline","mb-4"],["type","email","id","in-email","formControlName","email","placeholder","mail@mail.com",1,"form-control","form-control-lg"],["for","in-email",1,"form-label"],["type","password","id","in-password","formControlName","password","placeholder","*****",1,"form-control","form-control-lg"],[1,"invalid-feedback"],["for","in-password",1,"form-label"],[1,"form-outline","mb-3"],["id","in-rol","formControlName","rol",1,"form-control","form-control-lg"],["value",""],["value","1"],["value","2"],["for","in-rol",1,"form-label"],[1,"text-center","text-lg-start","mt-4","pt-2"],["type","submit",1,"btn","btn-primary","btn-lg",2,"padding-left","2.5rem","padding-right","2.5rem"],[1,"small","fw-bold","mt-2","pt-1","mb-5"],[1,"link-danger",3,"routerLink"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"p",1),e._uU(2,"Registro de usuario"),e.qZA()(),e.TgZ(3,"form",2),e.NdJ("ngSubmit",function(){return n.submitForm()}),e.TgZ(4,"div",3),e._UZ(5,"input",4),e.TgZ(6,"label",5),e._uU(7,"Email"),e.qZA()(),e.TgZ(8,"div",3),e._UZ(9,"input",6),e.TgZ(10,"div",7),e._uU(11," Please provide a valid city. "),e.qZA(),e.TgZ(12,"label",8),e._uU(13,"Contrase\xf1a"),e.qZA()(),e.TgZ(14,"div",9)(15,"select",10)(16,"option",11),e._uU(17,"--Selecccione un rol--"),e.qZA(),e.TgZ(18,"option",12),e._uU(19,"Admin"),e.qZA(),e.TgZ(20,"option",13),e._uU(21,"Usuario"),e.qZA()(),e.TgZ(22,"label",14),e._uU(23,"Contrase\xf1a"),e.qZA()(),e.TgZ(24,"div",15)(25,"button",16),e._uU(26,"Registrar"),e.qZA(),e.TgZ(27,"p",17),e._uU(28,"Ya tiene cuenta? "),e.TgZ(29,"a",18),e._uU(30,"Login"),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("formGroup",n.fRegister),e.xp6(26),e.Q6J("routerLink",e.DdM(2,b)))},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,r.EJ,r.YN,r.Kr,s.yS],styles:[""]}),o})()},{path:"logout",component:v},{path:"**",redirectTo:"login"}];let A=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[s.Bz.forChild(Z)],s.Bz]}),o})(),w=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[g.ez,A,r.u5,r.UX]]}),o})()}}]);